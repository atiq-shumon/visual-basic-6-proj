

--==GRATUITY_RECEIVE_SAVE==--
CREATE OR REPLACE  PROCEDURE GRATUITY_RECEIVE_SAVE 
(
P_GRA_RECEIVE_ID NUMBER,
P_SOURCE_OF_GRATUITY VARCHAR2,
P_DESCRIPTION VARCHAR2,
P_PAYMENT_RECE_DATE DATE,
P_RECEIVED_AMOUNT NUMBER,
P_PAYMENT_RECE_TYPE VARCHAR2,
P_CHECK_NO VARCHAR2,
P_ACCOUNT_NO VARCHAR2,
P_BANK_CODE VARCHAR2,
P_VOUCHER_NO VARCHAR2,
P_ACCOUNT_TYPE VARCHAR2
)

as
var_temp number;
V_GRA_RECEIVE_ID NUMBER:=0;
V_ID NUMBER:=0;

begin
select count(*) into var_temp
from GRATUITY_RECEIVE
where GRA_RECEIVE_ID=P_GRA_RECEIVE_ID;


if var_temp>0 then
update GRATUITY_RECEIVE
set  
 SOURCE_OF_GRATUITY=p_SOURCE_OF_GRATUITY ,
 DESCRIPTION=p_DESCRIPTION,
 PAYMENT_RECE_DATE=p_PAYMENT_RECE_DATE,
 RECEIVED_AMOUNT=p_RECEIVED_AMOUNT,
 PAYMENT_RECE_TYPE =p_PAYMENT_RECE_TYPE,
 CHECK_NO =p_CHECK_NO,
 ACCOUNT_NO =p_ACCOUNT_NO,
 BANK_CODE =p_BANK_CODE,
 VOUCHER_NO= P_VOUCHER_NO,
 ACCOUNT_TYPE=P_ACCOUNT_TYPE 
where GRA_RECEIVE_ID=p_GRA_RECEIVE_ID;
else

SELECT NVL(MAX(GRA_RECEIVE_ID),0) INTO V_ID
FROM 
GRATUITY_RECEIVE;
V_GRA_RECEIVE_ID:= V_ID + 1;



insert into GRATUITY_RECEIVE values(
	V_GRA_RECEIVE_ID,
	P_SOURCE_OF_GRATUITY,
	P_DESCRIPTION,
	P_PAYMENT_RECE_DATE,
	P_RECEIVED_AMOUNT,
	P_PAYMENT_RECE_TYPE,
	P_CHECK_NO,
	P_ACCOUNT_NO,
	P_BANK_CODE,
	P_VOUCHER_NO,
	P_ACCOUNT_TYPE
	);
end if;
commit;
end  GRATUITY_RECEIVE_SAVE;

/




--==GRATUITY_RECEIVE_DELETE=--

CREATE OR REPLACE  PROCEDURE GRATUITY_RECEIVE_DELETE
    (
P_GRA_RECEIVE_ID NUMBER
)
as
var_temp number;
begin
select count(*) into var_temp
from GRATUITY_RECEIVE
where GRA_RECEIVE_ID=P_GRA_RECEIVE_ID;
if var_temp>0 then
Delete from GRATUITY_RECEIVE where GRA_RECEIVE_ID=P_GRA_RECEIVE_ID;
end if;
commit;
end  GRATUITY_RECEIVE_DELETE;
/








--==GRATUITY_PAYMENT_SAVE==--

CREATE OR REPLACE  PROCEDURE GRATUITY_PAYMENT_SAVE 
(
P_GRA_PAYMENT_ID NUMBER,
P_PURPOSE_OF_PAYMENT VARCHAR2,
P_DESCRIPTION VARCHAR2,
P_PAYMENT_DATE DATE,
P_AMOUNT NUMBER,
P_PAYMENT_TYPE VARCHAR2,
P_CHECK_NO VARCHAR2,
P_ACCOUNT_NO VARCHAR2,
P_BANK_CODE VARCHAR2,
P_VOUCHER_NO VARCHAR2,
P_ACCOUNT_TYPE VARCHAR2

)

as
var_temp number;
V_GRA_PAYMENT_ID NUMBER:=0;
V_ID NUMBER:=0;

begin
select count(*) into var_temp

from GRATUITY_PAYMENT where GRA_PAYMENT_ID=P_GRA_PAYMENT_ID;

if var_temp>0 then
update GRATUITY_PAYMENT
set  
PURPOSE_OF_PAYMENT=P_PURPOSE_OF_PAYMENT,
DESCRIPTION=P_DESCRIPTION,
PAYMENT_DATE=P_PAYMENT_DATE,
AMOUNT=P_AMOUNT,
PAYMENT_TYPE=P_PAYMENT_TYPE,
CHECK_NO=P_CHECK_NO,
ACCOUNT_NO=P_ACCOUNT_NO,
BANK_CODE =p_BANK_CODE,
VOUCHER_NO= P_VOUCHER_NO,
ACCOUNT_TYPE=P_ACCOUNT_TYPE  
where GRA_PAYMENT_ID=p_GRA_PAYMENT_ID;
else 

SELECT NVL(MAX(GRA_PAYMENT_ID),0) INTO V_ID
FROM 
GRATUITY_PAYMENT;
V_GRA_PAYMENT_ID:= V_ID + 1;

insert into GRATUITY_PAYMENT values(
	V_GRA_PAYMENT_ID,
	P_PURPOSE_OF_PAYMENT,
	P_DESCRIPTION,
	P_PAYMENT_DATE,
	P_AMOUNT,
	P_PAYMENT_TYPE,
	P_CHECK_NO,
	P_ACCOUNT_NO,
	P_BANK_CODE,
	P_VOUCHER_NO,
	P_ACCOUNT_TYPE
	);
end if;
commit;
end  GRATUITY_PAYMENT_SAVE;

/



--==GRATUITY_PAYMENT_DELETE==--

CREATE OR REPLACE  PROCEDURE GRATUITY_PAYMENT_DELETE
    (
P_GRA_PAYMENT_ID NUMBER
)
as
var_temp number;
begin
select count(*) into var_temp
from GRATUITY_PAYMENT
where GRA_PAYMENT_ID=P_GRA_PAYMENT_ID;
if var_temp>0 then
Delete from GRATUITY_PAYMENT where GRA_PAYMENT_ID=P_GRA_PAYMENT_ID;
end if;
commit;
end  GRATUITY_PAYMENT_DELETE;
/




-- GRATUITY_CAPITAL_FUND_SAVE ----

CREATE OR REPLACE  PROCEDURE GRATUITY_CAPITAL_FUND_SAVE 
(
P_TRACK_ID NUMBER,
P_ACCOUNT_TYPE VARCHAR2,
P_ACCOUNT_NO VARCHAR2,
P_BANK_CODE VARCHAR2,
P_AMOUNT NUMBER
)

as
var_temp number;
V_TRACK_ID NUMBER:=0;
V_ID NUMBER:=0;

begin
select count(*) into var_temp
from GRA_CAPITAL_FUND
where TRACK_ID=P_TRACK_ID;


if var_temp>0 then
update GRA_CAPITAL_FUND
set  
 ACCOUNT_TYPE=p_ACCOUNT_TYPE ,
 ACCOUNT_NO=p_ACCOUNT_NO,
 BANK_CODE=p_BANK_CODE,
 AMOUNT=p_AMOUNT 
where TRACK_ID=p_TRACK_ID;
else

SELECT nvl(MAX(TRACK_ID),0) INTO V_ID
FROM 
GRA_CAPITAL_FUND;
V_TRACK_ID:= V_ID + 1;



insert into GRA_CAPITAL_FUND values(
	V_TRACK_ID,
	P_ACCOUNT_TYPE,
	P_ACCOUNT_NO,
	P_BANK_CODE,
	P_AMOUNT
	);
end if;
commit;
end  GRATUITY_CAPITAL_FUND_SAVE;
/


--==GRATUITY_PAYMENT_DELETE==--

CREATE OR REPLACE  PROCEDURE GRATUITY_CAPITAL_FUND_DELETE
    (
P_TRACK_ID NUMBER
)
as
var_temp number;
begin
select count(*) into var_temp
from GRA_CAPITAL_FUND
where TRACK_ID=P_TRACK_ID;
if var_temp>0 then
Delete from GRA_CAPITAL_FUND where TRACK_ID=P_TRACK_ID;
end if;
commit;
end  GRATUITY_CAPITAL_FUND_DELETE;
/



