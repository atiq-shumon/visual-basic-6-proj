create or replace procedure Rpt_Leave_Application(p_test_cursor in out
test_package.test_type,
P_BeginDate Date,
p_EndDate Date,
P_EmpID varchar2)
as
begin
open p_test_cursor for
SELECT EMP_INFO.EMP_ID,EMP_INFO.EMP_NM,ST_DEPT.DEPT_NM,ST_DESIG.DESIGNATION, 
ST_LEAVE.LEAVE_NAME,LEAVE_APPLICATION.NO_OF_DAYS_LEAVE, 
LEAVE_APPLICATION.DATE_OF_APPLIED,LEAVE_APPLICATION.DATE_OF_JOINFROMLF, 
LEAVE_APPLICATION.REMAIN_CASUALLEAVE
FROM EMP_INFO,EMP_JOB_INFO,LEAVE_APPLICATION, 
ST_LEAVE,ST_DEPT,ST_DESIG
WHERE ((EMP_JOB_INFO.EMP_ID=EMP_INFO.EMP_ID)
AND (LEAVE_APPLICATION.EMP_ID=EMP_INFO.EMP_ID)
AND (LEAVE_APPLICATION.LEAVE_CODE=ST_LEAVE.LEAVE_CODE)
AND (EMP_JOB_INFO.DESIG=ST_DESIG.DESIG_CODE)
AND (EMP_JOB_INFO.DEPT=ST_DEPT.DEPT_CODE)
AND (EMP_INFO.EMP_ID=P_EmpID)
AND LEAVE_APPLICATION.DATE_OF_APPLIED BETWEEN P_BeginDate AND p_EndDate);
end Rpt_Leave_Application;
