create or replace procedure Rpt_Promotion_Record(p_test_cursor in out
test_package.test_type,
P_EmpID varchar2,
P_BEGIN_DATE DATE,
P_END_DATE  DATE
)
as
var_temp number;
Var_Retirement number;
begin
begin
If P_EmpID is null then
open p_test_cursor for

 select PROMOTION_INFO.EMP_ID,
 PROMOTION_INFO.LAST_PROM_DATE,
 PROMOTION_INFO.P_PROMOTION_EFF_DT,
 PROMOTION_INFO.CURRENT_BASIC,
 PROMOTION_INFO.CURRENT_SCALE,
 PROMOTION_INFO.ENTRY_DATE,
 EMP_INFO.EMP_NM,
 EMP_JOB_INFO.JDATE,
 ST_DEPT.DEPT_NM
 from EMP_INFO,EMP_JOB_INFO,
 PROMOTION_INFO,ST_DEPT
 WHERE ((EMP_JOB_INFO.EMP_ID=EMP_INFO.EMP_ID)
 AND (PROMOTION_INFO.EMP_ID=EMP_INFO.EMP_ID)
 AND (EMP_JOB_INFO.DEPT=ST_DEPT.DEPT_CODE)
 AND (PROMOTION_INFO.ENTRY_DATE BETWEEN P_BEGIN_DATE AND P_END_DATE));


else
open p_test_cursor for
  select PROMOTION_INFO.EMP_ID,
 PROMOTION_INFO.LAST_PROM_DATE,
 PROMOTION_INFO.P_PROMOTION_EFF_DT,
 PROMOTION_INFO.CURRENT_BASIC,
 PROMOTION_INFO.CURRENT_SCALE,
 PROMOTION_INFO.ENTRY_DATE,
 EMP_INFO.EMP_NM,
 EMP_JOB_INFO.JDATE,
 ST_DEPT.DEPT_NM
 from EMP_INFO,EMP_JOB_INFO,
 PROMOTION_INFO,ST_DEPT
 WHERE ((EMP_JOB_INFO.EMP_ID=EMP_INFO.EMP_ID)
 AND (PROMOTION_INFO.EMP_ID=EMP_INFO.EMP_ID)
 AND (EMP_JOB_INFO.DEPT=ST_DEPT.DEPT_CODE)
 AND (PROMOTION_INFO.ENTRY_DATE BETWEEN P_BEGIN_DATE AND P_END_DATE)
 AND (PROMOTION_INFO.EMP_ID=P_EmpID));
end if ;
end ;
end Rpt_Promotion_Record;
/
