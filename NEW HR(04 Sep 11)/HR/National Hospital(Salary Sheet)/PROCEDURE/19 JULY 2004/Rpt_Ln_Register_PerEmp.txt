Create or Replace procedure Rpt_Ln_Register_PerEmp(p_test_cursor in out
test_package.test_type,
P_EmpID varchar2
)
as
begin
---If P_EmpID is not null then

 open p_test_cursor for
 SELECT ST_DEPT.DEPT_NM,
 ST_DESIG.DESIGNATION, EMP_INFO.EMP_ID,EMP_INFO.EMP_NM,
 LOANINFORMATION_MAIN.LOANISSUEDATE,LOANINFORMATION_MAIN.ISSUEDAMOUNT,
 LOANINFORMATION_MAIN.NOOFINSTALLMENT,LOANINFORMATION_MAIN.SLABINSTALLMENTAMOUNT,
 LOANINFORMATION_SUB.LOANREFUNDEDDATE,
 LOANINFORMATION_SUB.NOOFINTALLMENTPAID,LOANINFORMATION_SUB.AMOUNTPAID,
 LOANINFORMATION_SUB.CURRENTBALANCE
 FROM EMP_INFO,EMP_JOB_INFO,ST_DEPT,ST_DESIG,
 LOANINFORMATION_MAIN,LOANINFORMATION_SUB
 WHERE ((EMP_JOB_INFO.EMP_ID=EMP_INFO.EMP_ID)
 AND (EMP_JOB_INFO.DEPT=ST_DEPT.DEPT_CODE)
 AND (EMP_JOB_INFO.DESIG=ST_DESIG.DESIG_CODE)
 AND (EMP_JOB_INFO.EMP_ID=LOANINFORMATION_MAIN.EMP_ID)
 AND (EMP_JOB_INFO.EMP_ID=LOANINFORMATION_SUB.EMP_ID)
 AND  EMP_INFO.EMP_ID=P_EmpID)
 order by LOANINFORMATION_SUB.LOANREFUNDEDDATE;
/*
else
 open p_test_cursor for
 SELECT ST_DEPT.DEPT_NM,
 ST_DESIG.DESIGNATION, EMP_INFO.EMP_ID,EMP_INFO.EMP_NM,
 LOANINFORMATION_MAIN.LOANISSUEDATE,LOANINFORMATION_MAIN.ISSUEDAMOUNT,
 LOANINFORMATION_MAIN.NOOFINSTALLMENT,LOANINFORMATION_MAIN.SLABINSTALLMENTAMOUNT,
 LOANINFORMATION_SUB.LOANREFUNDEDDATE,
 LOANINFORMATION_SUB.NOOFINTALLMENTPAID,LOANINFORMATION_SUB.AMOUNTPAID,
 LOANINFORMATION_SUB.CURRENTBALANCE
 FROM EMP_INFO,EMP_JOB_INFO,ST_DEPT,ST_DESIG,
 LOANINFORMATION_MAIN,LOANINFORMATION_SUB
 WHERE ((EMP_JOB_INFO.EMP_ID=EMP_INFO.EMP_ID)
 AND (EMP_JOB_INFO.DEPT=ST_DEPT.DEPT_CODE)
 AND (EMP_JOB_INFO.DESIG=ST_DESIG.DESIG_CODE)
 AND (EMP_JOB_INFO.EMP_ID=LOANINFORMATION_MAIN.EMP_ID)
 AND (EMP_JOB_INFO.EMP_ID=LOANINFORMATION_SUB.EMP_ID))
 order by LOANINFORMATION_SUB.LOANREFUNDEDDATE;
end if;
*/
end Rpt_Ln_Register_PerEmp;